!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t,n,r){var o=(0,u.default)(e);if(o)return o in u?u[o](n,t,r):void console.warn("Unhandled op: "+o)}function o(e){for(var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(document.querySelectorAll("[data-op]"))),n=0;n<t.length;n++){var o=t[n];o.innerHTML=r(o.dataset.op,o.dataset,e)}}function i(e,t){var n=t.target.dataset.handler;return!!n&&r(n,t.target.dataset,e,t)}var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));document.dispatchEvent(new CustomEvent("locate-services",{detail:function(e,t){e?console.error(e):(document.addEventListener("click",function(e){return function(e,t){"SELECT"!==t.target.tagName&&i(e,t)&&t.preventDefault()}(t,e)}),document.addEventListener("change",function(e){return i(t,e)}),document.addEventListener("redraw",function(){return o(t)}),document.dispatchEvent(new Event("redraw")))}}))},function(e,t,n){"use strict";function r(e){return e?(0,s.ul)(!0,e.providers().filter(function(e){return e}).map(function(t){return(0,s.li)(function(e,t){var n={service:e.name,provider:t.name};return(0,s.button)("select-provider",n,t.name||"??")}(e,t))})):"???"}function o(e,t,n){if(n){var r=(0,s.label)("Try: ",(0,s.select)(e,t,Array.from((0,c.userFunctions)(n)))),o=s.div.withClass("test-area");return(0,s.div)(r,o)}}function i(e){return e?s.box.big((0,s.sub)(e.name+" provider"),function(e){var t=e.provider;return t?(0,s.b)(t.description+" ( "+t.name+" ) "+(0,s.button)("deselect-provider",{service:e.name}," X ")):(0,s.b)("(none)")}(e),o("test-service-method",{service:e.name},e),"Available: "+r(e)):(0,s.section)("(nothing)")}function u(e,t){var n=Object.values(e).find(function(e){return e.name===t.service});if(!n)throw new Error("Service not known: "+t.service);return n}function a(e,t){var n=t.target.value,r=t.target.parentElement.parentElement.querySelector(".test-area");r&&(r.innerHTML=function(e,t){if(!t)return"";var n=e[t].length,r={method:t},o=s.input.text("param").repeat(n);return(0,s.div)(o||"(no parameters)",(0,s.button)("invokeTestMethod",r,"Invoke"),s.div.withClass("messages"),s.div.withClass("child-context"))}(e,n),r.object=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.invokeTestMethod=void 0;t.invokeTestMethod=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var u=t[o](i),a=u.value}catch(e){return void n(e)}if(!u.done)return Promise.resolve(a).then(function(e){r("next",e)},function(e){r("throw",e)});e(a)}return r("next")})}}(regeneratorRuntime.mark(function e(t,n,r){var i,u,a,c,s,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.target.parentElement.parentElement,u=i.object){e.next=4;break}throw new Error("No test object");case 4:if(a=u[n.method]){e.next=7;break}throw new Error("Method not found: "+n.method);case 7:return c=Array.from(i.querySelectorAll("input[type=text]")).map(function(e){return function(e){try{return JSON.parse(e)}catch(t){return e}}(e.value)}),(s=r.target.parentElement.querySelector(".messages"))&&(s.innerHTML=f("Running...<br />")),l=i.querySelector(".child-context"),l.innerHTML="",e.prev=12,console.log("Applying",c,"to",a,"on",u),e.next=16,a.apply(u,c);case 16:d=e.sent,console.log(d),s&&(s.innerHTML+=f(JSON.stringify(d))),l.innerHTML=o("test-object-method",{},d),l.object=d,e.next=27;break;case 23:e.prev=23,e.t0=e.catch(12),console.error(e.t0),s&&(s.innerHTML+=e.t0.stack);case 27:case"end":return e.stop()}},e,this,[[12,23]])}));return function(t,n,r){return e.apply(this,arguments)}}();t.summarizeServices=function(e){return Object.values(e).map(i).join("")},t.selectProvider=function(e,t){var n=function(e,t){var n=u(e,t),r=t.provider?n.providers().find(function(e){return e.name===t.provider}):n.provider;if(!r)throw new Error("Unknown/unspecified provider: "+t.provider);return{service:n,provider:r}}(e,t),r=n.service,o=n.provider;r.select(o),document.dispatchEvent(new Event("redraw"))},t.deselectProvider=function(e,t){u(e,t).deselect(),document.dispatchEvent(new Event("redraw"))},t.testObjectMethod=function(e,t,n){return a(n.target.parentElement.parentElement.parentElement.object,n)},t.testServiceMethod=function(e,t,n){return a(u(e,t),n)};var c=n(2),s=n(3);t.default=function(e){return e?e.replace(/-./g,function(e){return e[1].toUpperCase()}):e};var f=function(e){return"["+(new Date).toLocaleTimeString()+"] "+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return function e(t){return t&&t!==Object.prototype&&Object.getOwnPropertyNames(t).concat(e(Object.getPrototypeOf(t))||[])}(e).filter(function(t){return"function"==typeof e[t]})};t.userFunctions=function(e){return new Set(r(e).filter(function(e){return"constructor"!==e&&!~e.indexOf("__")}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return void 0!==e},o=function(e){return Object.keys(e||{}).reduce(function(t,n){return t+" data-"+n+'="'+e[n]+'"'},"")},i=function(e){return e.filter(r).join("<br />")};t.sub=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return'<span class="sub-heading">'+i(t)+"</span>"},t.b=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return'<span class="bold">'+i(t)+"</span>"};(t.box=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return'<div class="box">'+i(t)+"</div>"}).big=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return'<div class="box big-box">'+i(t)+"</div>"};t.section=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"<section>"+i(t)+"</section>"};(t.div=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"<div>"+i(t)+"</div>"}).withClass=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return'<div class="'+e+'">'+i(n)+"</div>"};t.article=function(e,t){return"<article><header>"+e+"</header>"+t+"</article>"},t.ul=function(e,t){return'<ul class="'+(e?"inline":"")+'">'+t.join("")+"</ul>"},t.li=function(e){return"<li>"+e+"</li>"},t.label=function(e,t){return"<label>"+e+t+"</label>"},t.button=function(e,t,n){return'<button data-handler="'+e+'" '+(t?o(t):"")+">"+n+"</button>"};var u=t.option=function(e,t){return'<option value="'+e+'">'+(t||e)+"</option>"},a=t.options=function(e){return"<option></option>"+e.map(function(e){return u(e)})},c=(t.select=function(e,t,n){return'<select data-handler="'+e+'" '+o(t)+">"+a(n)+"</select>"},t.input=function(e,t){return'<input type="'+t+'"" class="'+e+'" />'});c.text=function(e){return c(e,"text")}}]);
//# sourceMappingURL=main.js.map